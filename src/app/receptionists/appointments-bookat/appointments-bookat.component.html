<div class="container">
  <h3>Book an Appointment</h3>
  <hr>
  <form #patform="ngForm" (ngSubmit)="onSubmit(patform)">
    <!-- Patient ID -->
    <div class="form-group">
      <label>Patient ID:</label>
      <input
        type="text"
        readonly
        name="PatientId"
        class="form-control"
        [(ngModel)]="appointment.PatientId"
      />
    </div>

    <!-- Specialization Dropdown -->
    <div class="form-group">
      <label>Specialization</label>
      <select
        class="form-control" 
        [(ngModel)]="appointment.SpecializationId"
        name="specialization"
        (change)="onSpecializationChange()"
        required>
        <option value="0" disabled selected >----Select Specialization----</option>
        <option
          *ngFor="let spec of specializations"
          [value]="spec.SpecializationId">    
          {{ spec.SpecializationName }}
        </option>
      </select>
    </div>

    <!-- Doctor Dropdown -->
    <div class="form-group">
      <label>Doctor</label>
      <select class="form-control" [(ngModel)]="appointment.DoctorId" name="doctor" (change)="onDoctorChange()" required>
        <option value="0" selected disabled>--Select Doctor--</option>
        <option *ngFor="let doc of doctorspec" [value]="doc.DoctorId">{{ doc.users.staff.StaffName }}</option>
      </select>
    </div>    
    <!-- Availability Dropdown -->
    <!-- <div class="form-group">
      <label>Availability</label>
      <select class="form-control" [(ngModel)]="selectedAvailabilityId" name="availability" required>
        <option value="" disabled selected>Select Availability</option>
        <option *ngFor="let avail of availabilities" [value]="avail.AvailabilityId">
          {{ avail.Session }} | {{ avail.StartTime }} - {{ avail.EndTime }} | {{ avail.Weekday }}
        </option>
      </select>
    </div> -->

    <!-- Appointment Date -->
     <div class="form-group">
      <label>Appointment Date</label>
      <input type="date" class="form-control" [(ngModel)]="appointment.AppointmentDate" name="appointmentDate" required />
    </div>

    <!-- Token Number -->
    <div class="form-group">
      <label>Token Number</label>
      <input type="number" class="form-control" [(ngModel)]="appointment.TokenNumber" readonly />
      <button type="button" class="btn btn-primary mt-2" (click)="onGenerateToken()">Generate Token</button>
    </div>

    <div class="form-group">
      <label>Consultation Fee</label>
      <input type="number" class="form-control" [(ngModel)]="consultationFee" readonly />
    </div>

    <!-- Submit Button -->
     <button type="submit" class="btn btn-success">Book Appointment</button>
  </form>
</div>
